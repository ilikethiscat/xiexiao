<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[谢小漫]]></title>
  <link href="http://xiexiao.com/atom.xml" rel="self"/>
  <link href="http://xiexiao.com"/>
  <updated>2014-07-17T10:20:22.449Z</updated>
  <id>http://xiexiao.com/</id>
  <author>
    <name><![CDATA[谢小漫]]></name>
    <email><![CDATA[ilikethiscat@gmail.com]]></email>
  </author>
  <generator uri="http://zespia.tw/hexo">Hexo</generator>
  <entry>
    <title type="html"><![CDATA[Docker基础指南]]></title>
    <link href="http://xiexiao.com/2014/07/17/docker_intro/"/>
    <id>http://xiexiao.com/2014/07/17/docker_intro/</id>
    <published>2014-07-17T10:13:30.000Z</published>
    <updated>2014-07-17T10:20:12.784Z</updated>
    <content type="html"><![CDATA[<h1>Docker介绍</h1>
<p>Docker作为一个容器运行，运行一个unix进程与服务器隔离提供里强大的安全保障，你的软件可以重复地运行在任何地方，因为它的容器包含了所有的环境依赖关系！</p>
<p>Docker.io 是轻量级的“容器引擎+映像仓库”，在LXC（linux轻量级容器）的基础上构建，可以运行任何应用程序。<br>docker.io的核心层由以下几个部分组成:</p>
<ul>
<li>可执行程序，“/usr/bin/docker”</li>
<li>docker.io网站上有一系列创建好的操作系统和应用程序映像</li>
<li>AUFS（另一个统一文件系统）来实现文件系统的快照，文件变化，控制只读或读写的需求。</li>
<li>LXC（Linux轻量级容器）</li>
<li>Cgroups（各种资源和命名空间的管理）</li>
</ul>
<h1>安装</h1>
<p>以下以Linux版本：<code>CentOS release 6.5 (Final)</code>，管理员用户运行</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">cat</span> /etc/centos-release
</pre></td></tr></table></figure>

<p>安装docker-io</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">yum</span> <span class="literal">-</span><span class="comment">y</span> <span class="comment">install</span> <span class="comment">docker</span>-<span class="comment">io</span> <span class="literal">-</span><span class="literal">-</span><span class="comment">enablerepo=epel
</pre></td></tr></table></figure>

<p>安装成功后，运行命令得到相关的介绍</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="title">docker</span>
<span class="title">docker</span> -v
</pre></td></tr></table></figure>

<p>安装的版本是：<code>Docker version 1.0.0, build 63fe64c/1.0.0</code></p>
<p>配置服务运行和自动启动</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>service docker <span class="operator"><span class="keyword">start</span>
chkconfig docker <span class="keyword">on</span>
</pre></td></tr></table></figure>

<p>需要拉取images，拉取基本的CentOS的images</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">docker</span> pull centos
</pre></td></tr></table></figure>

<p>拉取完成后，运行命令查看images</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">docker</span> images
</pre></td></tr></table></figure>

<p>得到列表显示</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="type">REPOSITORY</span>          <span class="type">TAG</span>                 <span class="type">IMAGE</span> <span class="type">ID</span>            <span class="type">CREATED</span>             <span class="type">VIRTUAL</span> <span class="type">SIZE</span>
<span class="title">centos</span>              centos7             <span class="number">1</span>a7dc42f78ba        <span class="number">7</span> days ago          <span class="number">236.4</span> <span class="type">MB</span>
<span class="title">centos</span>              latest              <span class="number">1</span>a7dc42f78ba        <span class="number">7</span> days ago          <span class="number">236.4</span> <span class="type">MB</span>
<span class="title">centos</span>              centos6             cd934e0010d5        <span class="number">8</span> days ago          <span class="number">206.9</span> <span class="type">MB</span>
</pre></td></tr></table></figure>

<p>基础命令列表，显示image的版本，运行image中的top命令，搜索images</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="title">docker</span> run centos:centos7 cat /etc/centos-release
<span class="title">docker</span> run centos:centos7 /usr/bin/top
<span class="title">docker</span> search centos
</pre></td></tr></table></figure>

<p>进入image中的命令模式，使用<code>exit</code>命令退出</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">docker</span> <span class="comment">run</span> <span class="literal">-</span><span class="comment">i</span> <span class="literal">-</span><span class="comment">t</span> <span class="comment">centos:centos7</span> <span class="comment">/bin/bash
</pre></td></tr></table></figure>

<h1>开启工作进程</h1>
<p>开启一个长时间工作进程</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">JOB=$(docker</span> <span class="comment">run</span> <span class="literal">-</span><span class="comment">d</span> <span class="comment">centos:centos7</span> <span class="comment">/bin/sh</span> <span class="literal">-</span><span class="comment">c</span> <span class="comment">"while</span> <span class="comment">true;</span> <span class="comment">do</span> <span class="comment">echo</span> <span class="comment">Hello</span> <span class="comment">world;</span> <span class="comment">sleep</span> <span class="comment">1;</span> <span class="comment">done")
</pre></td></tr></table></figure>

<p>查看这个工作进程的日志</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">docker</span> logs <span class="variable">$JOB</span>
</pre></td></tr></table></figure>

<p>杀死进程，也可以先用后一条命名查看容器id，通过4位+的容器id来kill。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">docker</span> kill <span class="variable">$JOB</span>
</pre></td></tr></table></figure>

<p>查看所有运行中的容器</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">docker</span> ps
</pre></td></tr></table></figure>

<h1>制作自己的image</h1>
<p>这里以制作带nc命令的centos7举例，后边这个images有用，进入某个版本的image的控制台</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">docker</span> <span class="comment">run</span> <span class="literal">-</span><span class="comment">i</span> <span class="literal">-</span><span class="comment">t</span> <span class="comment">centos:centos7</span> <span class="comment">/bin/bash
</pre></td></tr></table></figure>

<p>在image中安装nc，并确认安装成功</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">yum</span> -y install nc
</pre></td></tr></table></figure>

<p>之后退出这个控制台，查找这个image的Container ID:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">docker</span> ps -a
</pre></td></tr></table></figure>

<p>制作image并命名为centos7_nc，其中dbb52为上一个命令中得到的ID前四位</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>docker <span class="operator"><span class="keyword">commit</span> dbb52 centos7_nc
</pre></td></tr></table></figure>

<p><code>docker images</code>可以确认image已经成功，然后确认这个image中有nc命令</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">docker</span> run centos7_nc /bin/nc
</pre></td></tr></table></figure>

<h1>为服务绑定一个TCP端口</h1>
<p>为容器绑定4444端口，并告诉网络监听4444</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="comment">JOB=$(docker</span> <span class="comment">run</span> <span class="literal">-</span><span class="comment">d</span> <span class="literal">-</span><span class="comment">p</span> <span class="comment">4444</span> <span class="comment">centos7_nc</span> <span class="comment">/bin/nc</span> <span class="literal">-</span><span class="comment">l</span> <span class="comment">4444)
</pre></td></tr></table></figure>

<p>查看容器用的公共端口，这个是对外的端口</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="constant">PORT</span>=<span class="variable">$(</span>docker port <span class="variable">$JOB</span> <span class="number">4444</span> | awk -<span class="constant">F</span><span class="symbol">:</span> <span class="string">'{ print $2 }'</span>)
</pre></td></tr></table></figure>

<p>连接公共端口</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">echo</span> hello world | nc <span class="number">127.0.0.1</span> <span class="variable">$PORT</span>
</pre></td></tr></table></figure>

<p>确认网络连接是否工作，程序运行ok</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">docker</span> logs <span class="variable">$JOB</span>
</pre></td></tr></table></figure>

<p>END.</p>
]]></content>
    <category scheme="http://xiexiao.com/tags/Docker/" term="Docker"/>
    <category scheme="http://xiexiao.com/tags/CentOS/" term="CentOS"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[开始学习Go]]></title>
    <link href="http://xiexiao.com/2014/01/20/golang-start/"/>
    <id>http://xiexiao.com/2014/01/20/golang-start/</id>
    <published>2014-01-20T07:12:17.000Z</published>
    <updated>2014-01-20T09:18:03.678Z</updated>
    <content type="html"><![CDATA[<p>上星期开始，了解了一下Go，正如介绍</p>
<blockquote>
<p>Go is an open source programming language that makes it easy to build simple, reliable, and efficient software.</p>
</blockquote>
<p>Go确实是牛，除了开发者牛，后台牛。</p>
<p>我觉得最重要的一点是：这是开发语言使用者在开发了几十年后，重新思考了开发语言。</p>
<p>比如这不是基于VM的语言，Java，C#，Python，Ruby这些都是基于VM的，而Go不是，确提供了许多的语法糖。</p>
<p>同时还提供了goroutines，并行的goroutines。</p>
<p>还有很好用的go get, go test等代码管理调试命令。</p>
<p>先进的包管理使入门变得更轻松了。</p>
<p>推荐学习一下Go，本人2014年的目标之一就是学习和使用Go。</p>
]]></content>
    <category scheme="http://xiexiao.com/tags/Go/" term="Go"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[小说工匠]]></title>
    <link href="http://xiexiao.com/2013/12/28/craftsman-2013/"/>
    <id>http://xiexiao.com/2013/12/28/craftsman-2013/</id>
    <published>2013-12-28T06:33:20.000Z</published>
    <updated>2013-12-28T06:32:57.101Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>是不是一个优秀的小说家我不敢讲，但我要强调我一定是个非常优秀的小说工匠。工匠不对自己的作品形成美学，这就是没有天良了。——张大春  </p>
</blockquote>
<p>《小说稗类》是本不错的书。偶尔的几个晚上翻过几页，慢慢的品着里边的文字。虽然书里的部分字词，很陌生和比较难理解。</p>
<p>这段时间不断抽空看小说和一些杂书，都是几本同时开动。《大秦帝国》看了三分之二，《代码的未来》临睡前翻十几页，《小说稗类》也抽空翻几页。</p>
<p>有时看着看着，就慢慢的联想着编程那点事，比如上边引用的文字在《小说稗类》腰封上。<br>写代码其实也是同样的道理，要从代码工人上升到工匠，就必须不断的学习和观察钻研，对自己的作品形成美学，不能只是停留在一个点上。<br>要做把自己定位在是一个工匠上，才能把代码写好，产品做好。</p>
<p>摩尔定律：预计每18个月，芯片的性能会提高一倍。也就需要不断的进行程序代码的改进改良。</p>
]]></content>
    <category scheme="http://xiexiao.com/tags/小说稗类/" term="小说稗类"/>
    <category scheme="http://xiexiao.com/tags/小说工匠/" term="小说工匠"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[2013最后一场夜球]]></title>
    <link href="http://xiexiao.com/2013/12/27/football-end-2013/"/>
    <id>http://xiexiao.com/2013/12/27/football-end-2013/</id>
    <published>2013-12-27T15:33:17.000Z</published>
    <updated>2013-12-27T15:40:38.980Z</updated>
    <content type="html"><![CDATA[<p>断断续续的，在附近小区的篮球场踢了几年的足球。<br>这个月休战了很多场，每周两场。<br>今晚还好，不是很冷。</p>
<p>想写一个叫《当我谈路测分析时，我谈什么》的小文，先订在这儿，慢慢打打草稿。<br>估计得有几篇小文才能把这个事情说好。<br>虽说在做电信路测系统的公司呆了几年，感觉是越做越是做不好。<br>心里有很多的念头，估计还是得写写，总结一下才行。<br>大体能说的不是具体的如何做路测，而是路测得到的数据，分析的时候要考虑什么基础的知识。<br>不会涉及专业的电信网络知识：比如层三信令怎么破，这些个专业的知识我也不太懂。<br>在我看来，路测数据就是一堆时间纬度和空间纬度上的点的度量集合。</p>
<p>好吧，慢慢在本子上打草稿，农历新年前后鼓捣鼓捣。</p>
]]></content>
    <category scheme="http://xiexiao.com/tags/足球/" term="足球"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[开始ol3需要注意的]]></title>
    <link href="http://xiexiao.com/2013/12/26/ol3js-when-start/"/>
    <id>http://xiexiao.com/2013/12/26/ol3js-when-start/</id>
    <published>2013-12-26T05:13:17.000Z</published>
    <updated>2013-12-26T04:10:23.355Z</updated>
    <content type="html"><![CDATA[<p>Openlayers 3简称<a href="http://ol3js.org" target="_blank">ol3</a>确实是不错，架构方面好像好了很多，调整了projection的转换。<br>基于Google的<a href="http://code.google.com/p/closure-library/" target="_blank">Closure Library</a>，贡献代码的入门难度加大了。<br>代码的质量和输出代码的体积方面好像确实小了很多。</p>
<p>截至到本文之前，API Docs奇差，网上浏览就有找不到北的感觉。<br>还有没有支持IE7/IE8。<br>弄了一些基本功能之后，才发现没有支持IE7，看来还要花点时间切回Openlayers2了。<br>估计还是可以在移动设备上尝试一下ol3的。</p>
]]></content>
    <category scheme="http://xiexiao.com/tags/ol3/" term="ol3"/>
    <category scheme="http://xiexiao.com/tags/GIS/" term="GIS"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[最小化安装CentOS]]></title>
    <link href="http://xiexiao.com/2013/12/25/minimal-centos/"/>
    <id>http://xiexiao.com/2013/12/25/minimal-centos/</id>
    <published>2013-12-25T01:37:17.000Z</published>
    <updated>2013-12-25T01:54:23.792Z</updated>
    <content type="html"><![CDATA[<h3>1. 下载安装文件</h3>
<p>download CentOS-6.5-x86_64-minimal.iso file from <a href="http://mirrors.163.com/centos" target="_blank">mirrors.163.com/centos</a></p>
<h3>2. 安装</h3>
<p>安装过程略过。完成后网络没有启动。</p>
<h3>3. 启动网络</h3>
<p>查看网络配置：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">cat</span> -n /etc/sysconfig/network-scripts/ifcfg-eth0
</pre></td></tr></table></figure>

<p>修改网络配置：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">vi</span> /etc/sysconfig/network-scripts/ifcfg-eth0
</pre></td></tr></table></figure>

<p>配置内容如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="setting">DEVICE=<span class="value"><span class="string">"eth0"</span></span></span>
<span class="setting">HWADDR=<span class="value"><span class="string">"00:0C:29:6A:B0:95"</span></span></span>
<span class="setting">BOOTPROTO=<span class="value">dhcp</span></span>
<span class="setting">MM_CONTROLLED=<span class="value"><span class="string">"yes"</span></span></span>
<span class="setting">ONBOOT=<span class="value"><span class="string">"yes"</span></span></span>
</pre></td></tr></table></figure>

<p>重新启动网络：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>service network re<span class="operator"><span class="keyword">start</span>
</pre></td></tr></table></figure>

<h3>4. 更新系统</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>yum -y <span class="operator"><span class="keyword">update</span>
</pre></td></tr></table></figure>

<h3>5. 关闭IPV6</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">vi</span> /etc/modprobe.conf
</pre></td></tr></table></figure>

<p>添加以下内容</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="title">alias</span> net-pf-<span class="number">10</span> <span class="built_in">off</span>
alias ipv6 <span class="built_in">off</span>
</pre></td></tr></table></figure>

<p>保存退出，并重启系统。</p>
<h3>6. 查看iptables状态</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">service</span> iptables status
</pre></td></tr></table></figure>

<p>设置iptables开机自动启动：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="title">chkconfig</span> iptables <span class="built_in">on</span> <span class="comment">#开启</span>
chkconfig iptables <span class="built_in">off</span> <span class="comment">#关闭</span>
</pre></td></tr></table></figure>

<p>iptables开启关闭服务</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="title">service</span> iptables start <span class="comment">#开启</span>
service iptables stop <span class="comment">#关闭</span>
</pre></td></tr></table></figure>

<h3>7. 查看系统时间和时区</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">date</span> -R <span class="preprocessor">#查看时间</span>
<span class="keyword">date</span> -s <span class="number">11</span>:<span class="number">15</span>:<span class="number">26</span> <span class="preprocessor">#修改时间</span>
</pre></td></tr></table></figure>

]]></content>
    <category scheme="http://xiexiao.com/tags/CentOS/" term="CentOS"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[挖坑记]]></title>
    <link href="http://xiexiao.com/2013/12/24/dig-a-blog/"/>
    <id>http://xiexiao.com/2013/12/24/dig-a-blog/</id>
    <published>2013-12-24T11:42:17.000Z</published>
    <updated>2013-12-24T12:02:42.637Z</updated>
    <content type="html"><![CDATA[<p>本blog使用<a href="https://github.com/tommy351/hexo/" target="_blank">Hexo</a>.<br>相关的建立方法请自行google一下。</p>
<p>Hexo是个不错的程序，正如其自身的介绍:</p>
<blockquote>
<p>A fast, simple &amp; powerful blog framework, powered by Node.js.</p>
</blockquote>
<p>安装Hexo的过程，也是对Node.js的了解，Node.js确实足够的简单，一个.exe文件。<br>还有包管理npm，官网上的<a href="http://nodejs.org/dist/" target="_blank">release files</a>就提供了node.exe的下载和npm包管理的文件包。</p>
<p>建立文件夹，然后解压node.exe，解压npm-1.3.9.zip到主目录下。<br>目录结构: D:\nodejs\</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="title">node</span>.exe
<span class="title">npm</span>.cmd
<span class="title">node_modules</span>\
</pre></td></tr></table></figure>

<p>设置一下npm的一下配置目录：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>npm config set prefix "D:<span class="command">\nodejs</span><span class="command">\npm</span>-global"
npm config set cache "D:<span class="command">\nodejs</span><span class="command">\npm</span>-cache"
</pre></td></tr></table></figure>

<p>设置一下Path的环境变量，增加一下D:\nodejs\node-global;D:\nodejs\;就可以了。</p>
<p>设置完成后，Hexo的安装就非常简单了:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">npm</span> install -g hexo
</pre></td></tr></table></figure>

<p>然后就是新的一个cmd窗口，建立目录blog1，主要命令是:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="title">hexo</span> init <span class="comment">#建立网站</span>
hexo generate <span class="comment">#生成内容</span>
hexo server <span class="comment">#预览网站, 打开http://localhost:4000</span>
</pre></td></tr></table></figure>

<p>配置文件在_config.yml，相关配置请自行google。<br>需要配置github的地址等信息。<br>发布命令是:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">hexo</span> deploy
</pre></td></tr></table></figure>

<p>然后输入github帐号和密码, 我的windows下不会提示输入，摸瞎输入后，成功部署。<br>CNAME的域名绑定的话，就是在deploy之前，创建一个CNAME文件，写入域名，放到public目录下。<br>到域名DNS设置里边设置一个CNAME指向你的x.github.io。</p>
<p>然后就是要熟悉一下Markdown的语法了。</p>
<p>挖坑记录完毕。</p>
]]></content>
    <category scheme="http://xiexiao.com/tags/hexo/" term="hexo"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[Hello World]]></title>
    <link href="http://xiexiao.com/2013/12/24/hello-world/"/>
    <id>http://xiexiao.com/2013/12/24/hello-world/</id>
    <published>2013-12-24T06:42:17.000Z</published>
    <updated>2013-12-24T11:23:04.543Z</updated>
    <content type="html"><![CDATA[<p>Hello world!</p>
<p>你好，世界。</p>
<p>公元2013年12月24日，重新挖一个坑。</p>
<p>慢慢把旧坑里边的日志迁移过来吧。</p>
<p>世界的一切都安好，一如过去的岁月流淌在今日平淡生活中。</p>
]]></content>
  </entry>
</feed>
